<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For My Buba | Valentine 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,400&family=Montserrat:wght@300;400&family=Special+Elite&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --lilac: #C8A2C8;
            --deep-plum: #4B0082;
            --soft-lavender: #E6E6FA;
            --cream: #FFF9FF;
        }

        /* Prevent scrolling on entry */
        body.locked { overflow: hidden; }

        #entry-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--cream);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: opacity 1s ease;
            text-align: center;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--cream);
            margin: 0; padding: 0;
            overflow-x: hidden;
            color: var(--deep-plum);
            scroll-behavior: smooth;
        }

        #bg-animation-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .floating-element {
            position: absolute;
            bottom: -100px;
            opacity: 0.5;
            animation: floatUp linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            15% { opacity: 0.5; }
            85% { opacity: 0.5; }
            100% { transform: translateY(-125vh) rotate(360deg); opacity: 0; }
        }

        .hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(230, 230, 250, 0.3);
            position: relative;
            text-align: center;
        }

        .static-heart {
            position: absolute;
            opacity: 0.15;
            color: var(--deep-plum);
            z-index: 0;
            user-select: none;
        }

        h1 { font-family: 'Playfair Display', serif; font-size: 3rem; color: var(--deep-plum); margin: 0; padding: 0 10px; }

        .gallery-section { padding: 60px 20px; text-align: center; }
        .photo-container { display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; max-width: 1200px; margin: 0 auto; }
        
        .polaroid {
            background: white;
            padding: 12px 12px 35px 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            transform: rotate(-2deg);
            transition: all 0.4s ease;
            border: 1px solid #eee;
        }
        .polaroid:nth-child(even) { transform: rotate(3deg); }
        .polaroid img { width: 260px; height: 320px; object-fit: cover; display: block; }
        .polaroid p { font-family: 'Playfair Display', serif; margin-top: 15px; color: var(--lilac); font-weight: bold; }

        .letter-section { padding: 60px 20px; display: flex; justify-content: center; }
        .letter-paper {
            background: rgba(255, 255, 255, 0.95);
            width: 100%;
            max-width: 700px;
            padding: 40px;
            box-shadow: 0 10px 50px rgba(75, 0, 130, 0.1);
            border-left: 4px solid var(--lilac);
        }

        #typewriter {
            font-family: 'Special Elite', serif;
            font-size: 1rem;
            line-height: 1.8;
            color: #333;
            white-space: pre-wrap;
            text-align: left;
        }

        .proposal-container { 
            padding: 100px 20px 200px 20px; 
            text-align: center; 
            max-width: 900px;
            margin: 0 auto;
        }

        .proposal-container h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            color: var(--deep-plum);
            margin-bottom: 20px;
        }

        .button-group {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 40px;
            min-height: 350px;
            position: relative;
        }

        .btn { 
            padding: 15px 40px; 
            font-size: 1.2rem; 
            border-radius: 50px; 
            border: none; 
            cursor: pointer; 
            font-weight: bold; 
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            touch-action: none; /* Prevents default mobile touch behaviors */
        }

        #yesBtn { background-color: var(--deep-plum); color: white; z-index: 100; position: relative; }
        #noBtn { background-color: #f0f0f0; color: #888; position: relative; z-index: 50; }

        #mute-toggle {
            position: fixed; bottom: 20px; right: 20px; z-index: 1000;
            background: rgba(255, 255, 255, 0.8); border: 1px solid var(--lilac);
            border-radius: 50%; width: 45px; height: 45px; cursor: pointer; display: none;
        }

        .celebration-flower { position: fixed; top: -10%; pointer-events: none; z-index: 1000; animation: fall linear forwards; }
        @keyframes fall { to { transform: translateY(110vh) rotate(720deg); } }
    </style>
</head>
<body class="locked">

    <div id="entry-overlay" onclick="startExperience()">
        <h2 style="font-size: 2.2rem; margin-bottom: 10px; color: var(--deep-plum);">For Drithi</h2>
        <p style="font-size: 1.1rem; color: var(--lilac);">Click to open your Valentine ‚ù§Ô∏è</p>
    </div>

    <audio id="bgMusic" loop preload="auto">
        <source src="https://dl.dropboxusercontent.com/scl/fi/ev49gqxekdlax4jw6xmvb/Preetiya-Hesare-Neenu.mp3?rlkey=4xy7zzsfjqivoknwz0evn2er7" type="audio/mpeg">
    </audio>

    <div id="bg-animation-container"></div>

    <section class="hero">
        <span class="static-heart" style="top: 10%; left: 5%; font-size: 80px;">‚ô•</span>
        <span class="static-heart" style="top: 20%; right: 10%; font-size: 50px;">‚ô•</span>
        <span class="static-heart" style="bottom: 15%; left: 15%; font-size: 60px;">‚ô•</span>
        
        <div class="hero-content">
            <p style="letter-spacing: 3px; font-weight: bold; color: var(--lilac);">VALENTINE 2026</p>
            <h1>For My Dearest Buba</h1>
            <p style="font-style: italic; opacity: 0.8; margin-top: 15px;">"You are the most beautiful change I have ever made."</p>
        </div>
    </section>

    <section class="gallery-section">
        <div class="photo-container">
            <div class="polaroid">
                <img src="https://dl.dropboxusercontent.com/scl/fi/a4czu3wo0w73alwgu4amv/IMG20250623213345.jpg?rlkey=cwwjsgvtoqiem8yws6a37qwcc" alt="May">
                <p>May: The Shift</p>
            </div>
            <div class="polaroid">
                <img src="https://dl.dropboxusercontent.com/scl/fi/n1is72oevvotfbjyate4p/IMG20250709152121.jpg?rlkey=p5q4px09gfui1yloualvphjs8" alt="June 20">
                <p>June 20th: Belonging</p>
            </div>
            <div class="polaroid">
                <img src="https://dl.dropboxusercontent.com/scl/fi/sfojmh648r7re363gl4vr/IMG20250912154308.jpg?rlkey=crrcof2lknujy6f01its9frvx" alt="Mysore">
                <p>Mysore: The Realization</p>
            </div>
        </div>
    </section>

    <section class="letter-section">
        <div class="letter-paper">
            <div id="typewriter"></div>
        </div>
    </section>

    <section class="proposal-container">
        <h2>Buba, will you make me the happiest person and be my Valentine?</h2>
        <p id="nudgeText" style="height: 30px; color: var(--lilac); font-style: italic;"></p>
        <div class="button-group" id="btnWrapper">
            <button id="yesBtn" class="btn" onclick="celebrate()">YES! üíç</button>
            <button id="noBtn" class="btn">No</button>
        </div>
    </section>

    <button id="mute-toggle" onclick="toggleMute()">üîä</button>

    <script>
        function startExperience() {
            const music = document.getElementById('bgMusic');
            music.play().catch(e => console.log("Audio play failed", e));
            document.body.classList.remove('locked');
            document.getElementById('entry-overlay').style.opacity = '0';
            document.getElementById('mute-toggle').style.display = 'block';
            setTimeout(() => { document.getElementById('entry-overlay').style.display = 'none'; }, 1000);
            setInterval(createBgElement, 600);
        }

        function toggleMute() {
            const music = document.getElementById('bgMusic');
            const btn = document.getElementById('mute-toggle');
            music.muted = !music.muted;
            btn.innerText = music.muted ? "üîá" : "üîä";
        }

        function createBgElement() {
            const elements = ['üéà', 'üå∏', 'ü™∑', '‚ú®', 'üíú'];
            const el = document.createElement('div');
            el.className = 'floating-element';
            el.innerHTML = elements[Math.floor(Math.random() * elements.length)];
            el.style.left = Math.random() * 100 + 'vw';
            el.style.fontSize = (Math.random() * 20 + 15) + 'px';
            el.style.animationDuration = (Math.random() * 4 + 6) + 's'; 
            document.getElementById('bg-animation-container').appendChild(el);
            setTimeout(() => el.remove(), 10000);
        }

        const letterText = `My Dearest Buba,\n\nWhen we first connected back in May, I had no idea my world was about to shift its axis. I never imagined I‚Äôd reach a point where I‚Äôd happily let someone hold the keys to my heart, but then you happened. You are, without a question, the most beautiful change I have ever made.\n\nYou are so deeply ingrained in me now that loving you feels as natural as breathing. I‚Äôve found a strange, beautiful kind of peace in the "little things"‚Äîremembering the tiny timings of your day, sensing the slightest shift in your mood before you even speak, and knowing exactly how to bring that smile back to your face.\n\nJune 20th remains etched in my soul as one of the happiest days of my life. It was the day we stopped wondering and started belonging to each other. We‚Äôve had our ups and downs, and I know my "stupid self" took a little longer to navigate the big questions, but everything changed that day in Mysore.\n\nIt was there, looking at you, that I realized my vision of the future had been rewritten. I realized that if I am to walk the path of parenthood, it is with you and only you.\n\nI know I haven‚Äôt been a perfect partner, and for the times I fell short, I am truly sorry. But today, I want to give you my word: I promise to love you with an intensity that never wavers. I promise to protect you so fiercely that the "little girl" inside you feels safe enough to come out and play again.\n\nI am here to create a future so bright and memories so big that the shadows of the past finally fade away. I love you with my whole heart, my entire mind, and every fiber of being.\n\nHappy Valentine‚Äôs Day, my Buba, my Kusu, my everything.\n\nAlways yours,\nBubalus bubalis`;

        let i = 0; let isTyped = false;
        function typeWriter() {
            if (i < letterText.length) {
                document.getElementById("typewriter").innerHTML += letterText.charAt(i);
                i++; setTimeout(typeWriter, 40);
            }
        }
        window.addEventListener('scroll', () => {
            const letterPos = document.getElementById('typewriter').getBoundingClientRect().top;
            if (letterPos < window.innerHeight - 50 && !isTyped) { typeWriter(); isTyped = true; }
        });

        // BUG-FIXED MOBILE NUDGE LOGIC
        const nudges = ["Nice try, Kusu! üòâ", "The 'Yes' button is right there! üëâ", "Error 404: 'No' not found.", "Give up, Buba! It's fate.", "My heart says Yes, why are you saying No? ü•∫", "Are we playing tag now? üå∏"];
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const wrapper = document.getElementById('btnWrapper');
        let currentScale = 1;

        function moveButton(e) {
            // This stops the click/tap from actually registering on the button
            if (e) e.preventDefault();
            
            const maxX = wrapper.clientWidth - noBtn.clientWidth;
            const maxY = wrapper.clientHeight - noBtn.clientHeight;
            
            noBtn.style.position = 'absolute';
            noBtn.style.left = Math.floor(Math.random() * maxX) + 'px';
            noBtn.style.top = Math.floor(Math.random() * maxY) + 'px';
            
            document.getElementById('nudgeText').innerText = nudges[Math.floor(Math.random() * nudges.length)];
            
            // YES button grows
            currentScale += 0.2;
            yesBtn.style.transform = `scale(${currentScale})`;
        }

        // Desktop
        noBtn.addEventListener('mouseover', moveButton);
        // Mobile (passive: false is key to preventing the click)
        noBtn.addEventListener('touchstart', moveButton, {passive: false});
        // Catch-all
        noBtn.addEventListener('click', (e) => e.preventDefault());

        function celebrate() {
            noBtn.style.display = 'none';
            document.getElementById('nudgeText').style.display = 'none';
            document.querySelector('.proposal-container h2').innerHTML = "FOREVER YOURS! ‚ù§Ô∏èüå∏<br><span style='font-size: 1.5rem'>I love you so much, Buba!</span>";
            document.querySelector('.proposal-container h2').style.color = "#FF1493";
            for (let j = 0; j < 100; j++) { setTimeout(createConfetti, j * 50); }
        }

        function createConfetti() {
            const items = ['üå∏', 'ü™∑', '‚ú®', 'üíú', 'üíç', 'üíñ'];
            const flower = document.createElement('div');
            flower.className = 'celebration-flower';
            flower.innerHTML = items[Math.floor(Math.random() * 6)];
            flower.style.left = Math.random() * 100 + 'vw';
            flower.style.animationDuration = (Math.random() * 2 + 1) + 's';
            document.body.appendChild(flower);
            setTimeout(() => flower.remove(), 3000);
        }
    </script>
</body>
</html>
